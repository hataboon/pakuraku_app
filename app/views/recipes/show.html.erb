<!-- app/views/recipes/show.html.erb -->

<h1 class="text-3xl font-bold text-center mb-6">生成された献立</h1>
<% if @meal_plan.present? %>
  <div class="max-w-4xl mx-auto bg-white rounded-lg shadow-md p-6">
    <!-- レシピタイトルと画像 -->
    <h2 class="text-2xl font-semibold mb-4"><%= @meal_plan[:title] %></h2>

    <div class="text-center mb-6">
      <!-- 画像サイズを統一するためのクラス追加 -->
      <img src="<%= @meal_plan[:image] %>" alt="レシピ画像" 
           class="mx-auto rounded-lg shadow-lg" 
           style="max-width: 300px; max-height: 200px; object-fit: cover;">
    </div>

    <!-- 材料 -->
    <h3 class="text-xl font-semibold mb-2">材料</h3>
    <ul class="list-disc list-inside mb-6 text-gray-700">
      <% if @meal_plan[:ingredients].present? %>
        <% @meal_plan[:ingredients].each do |ingredient| %>
          <li><%= ingredient %></li>
        <% end %>
      <% else %>
        <li>材料が取得できませんでした。</li>
      <% end %>
    </ul>

    <!-- 手順 -->
    <h3 class="text-xl font-semibold mb-2">手順</h3>
    <p class="text-gray-700 mb-6"><%= @meal_plan[:steps] || "手順が取得できませんでした。" %></p>

    <!-- 栄養情報 -->
    <h2 class="text-2xl font-semibold mb-4">栄養情報</h2>
    <% if @nutrition_info.present? %>
      <ul class="space-y-4 mb-6">
        <% @nutrition_info.each do |ingredient, nutrients| %>
          <li>
            <strong><%= ingredient %></strong>
            <ul class="list-disc list-inside ml-4">
              <% nutrients.each do |nutrient, value| %>
                <li><%= nutrient %>: <%= value %></li>
              <% end %>
            </ul>
          </li>
        <% end %>
      </ul>
    <% else %>
      <p>栄養情報が取得できませんでした。</p>
    <% end %>

    <!-- レシピへのリンク -->
    <div class="text-center">
      <a href="<%= @meal_plan[:url] %>" target="_blank" class="text-blue-500 underline">レシピの詳細を見る</a>
    </div>
  </div>
<% else %>
  <p>指定した食材に基づくレシピが見つかりませんでした。</p>
<% end %>
