<!-- app/views/recipes/_form.html.erb -->

<%= form_with url: recipes_path, method: :post, local: true do |form| %>
  <div class="form-section mt-6">
    <!-- 食材入力部分 -->
    <%= form.label :ingredients, "使いたい食材を入力 (最大5個まで)" %>
    <div id="ingredientFields">
      <input type="text" name="ingredients[]" placeholder="食材１" class="form-control mb-2">
    </div>
    <button type="button" id="addIngredientButton" class="bg-blue-500 text-white px-4 py-2 rounded-lg">食材を追加</button> 

    <!-- 栄養素の選択 -->
    <%= form.label :nutrients, "栄養素を選択 (最大5つ)" %>
    <%= form.select :nutrients, ["ビタミン", "ミネラル", "タンパク質", "炭水化物", "脂質"], {}, class: "form-control" %>

    <!-- 日付範囲の入力 -->
    <input type="hidden" name="selected_dates" id="selectedDatesField">

    <!-- 献立作成ボタン -->
    <%= form.submit '献立作成', class: 'btn btn-primary mt-4' %>
  </div>

  <script>
  document.querySelector('form').addEventListener('submit', (event) => {
    const selectedDates = localStorage.getItem('selectedDates');
    if (selectedDates) {
      document.getElementById('selectedDatesField').value = selectedDates;
    }
  });
  </script>

<% end %>
